# Transcription Module

This module handles transcription from various sources, managed by the `TranscriptionDriver`.

## Supported Sources

### 1. Local Whisper (Default)
Runs locally on your machine.
- **MLX Whisper:** Optimized for Apple Silicon (5-10x faster).
- **WhisperX:** Better for Linux/Windows/NVIDIA.

### 2. AssemblyAI (Cloud)
Uses the AssemblyAI API for high-accuracy cloud transcription.
- Requires API Key (configured in Dashboard Settings).
- Key is stored locally in your browser (LocalStorage) for privacy.

### 3. Custom Supabase Database
Connects to a private Supabase instance to fetch existing transcripts.
- Useful if you have a separate pipeline populating a database.
- Requires `SUPABASE_URL` and `SUPABASE_KEY` (configured in Dashboard Settings).
- **Privacy:** Credentials stored locally in browser.

## Custom Database Compatibility

To use your own Supabase database as a source, it must have the following schema structure. 
Run this SQL in your Supabase SQL Editor to create the necessary tables:

```sql
-- 1. Episodes Table (Optional, for metadata)
create table if not exists public.episodes (
  id text primary key, -- e.g., 'EP097'
  title text,
  duration_seconds float,
  created_at timestamptz default now()
);

-- 2. Utterances Table (Required)
create table if not exists public.utterances (
  id bigint generated by default as identity primary key,
  episode_id text not null references public.episodes(id),
  speaker text,        -- 'A', 'B', 'SPEAKER_00', etc.
  text text not null,
  start_time float not null,
  end_time float not null,
  confidence float default 1.0,
  created_at timestamptz default now()
);

-- Create index for faster lookups
create index if not exists idx_utterances_episode_id on public.utterances(episode_id);

-- Enable Row Level Security (RLS) is recommended
alter table public.episodes enable row level security;
alter table public.utterances enable row level security;
```

The system expects to find utterances for a given `episode_id`.
