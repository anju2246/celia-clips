---
import "../styles/global.css";

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;

const navLinks = [
  { href: "/", label: "Dashboard" },
  { href: "/library", label: "Library" },
  { href: "/settings", label: "Settings" },
];
---

<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Celia Clips - AI-powered podcast clip generator"
    />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="theme-color" content="#09090b" />
    <link rel="apple-touch-icon" href="/pwa-192x192.png" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <script>
      import { registerSW } from "virtual:pwa-register";
      registerSW({
        immediate: true,
        onNeedRefresh() {
          console.log(
            "New content available, click on reload button to update.",
          );
        },
        onOfflineReady() {
          console.log("App is ready to work offline.");
        },
      });
    </script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-gradient-to-b from-[#0a0a0f] via-[#0f1820] to-[#0a0a0f] text-zinc-100 antialiased selection:bg-brand-400/30 font-sans min-h-screen"
  >
    <div class="noise-overlay"></div>
    <div class="grid-overlay"></div>
    <div class="min-h-screen flex flex-col">
      <header
        class="h-14 border-b border-zinc-800 flex items-center px-6 sticky top-0 bg-zinc-950/80 backdrop-blur-md z-10"
      >
        <div class="font-bold text-xl tracking-tight">
          celia<span class="text-brand-500">.</span>
        </div>
      </header>

      <div class="flex flex-1">
        <aside class="w-52 border-r border-zinc-800 hidden md:block p-4">
          <nav class="space-y-1">
            {
              navLinks.map((link) => {
                const isActive =
                  currentPath === link.href ||
                  (link.href !== "/" && currentPath.startsWith(link.href));
                return (
                  <a
                    href={link.href}
                    class={`block px-3 py-2 rounded-md transition-colors ${
                      isActive
                        ? "bg-zinc-900 text-brand-400 font-medium"
                        : "text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900"
                    }`}
                  >
                    {link.label}
                  </a>
                );
              })
            }
          </nav>
        </aside>

        <main class="flex-1 p-6">
          <slot />
        </main>
      </div>
    </div>
  </body>
</html>
